import{r as n,j as e,u as pt,H as mt}from"./app-D2KhOlPS.js";import{c as ke,u as ft,R as ht,a as xt,b as gt,V as vt,C as St,d as wt,A as yt}from"./app-layout-BuZHd0iL.js";import{C as ve,a as Se,b as Ie,c as Te,d as Pe}from"./card-CTMh3Ccf.js";import{u as Ct,A as bt,a as Nt,b as jt}from"./ErrorBoundary-DhJ2_a8D.js";import{B as Re}from"./badge-C9baLLyP.js";import{u as H,a as _t,c as oe,B as It}from"./button-DRgzOgcv.js";import{r as Le}from"./index-BHDVE5T7.js";import{u as Ee,c as R}from"./index-C-hE0QHb.js";import{c as Tt,u as q}from"./index-6XFs-mRv.js";import{u as je,P as Pt,h as Rt,a as Et,R as Mt,F as At,D as Dt}from"./index-C3HMWAIV.js";import{P as O}from"./index-D5JU00dO.js";import{u as Ot}from"./index-C4GiMeE-.js";import{c as Be}from"./createLucideIcon-EMwdt5a8.js";import{C as kt}from"./check-CSl0QALq.js";import{a as Me}from"./axios-BqQSuAxk.js";import{M as Ae}from"./message-square-B3ZYgRdM.js";import{M as Lt}from"./map-pin-BuTsegXW.js";import{P as Bt}from"./phone-DNgV663h.js";import{L as De}from"./loader-circle-BaJ-6V5O.js";/* empty css            */import"./floating-ui.react-dom-BzSDvg-6.js";import"./index-1ri6WIs6.js";import"./index-D329iiHL.js";import"./index-CMWG4mbA.js";import"./index-tyedukNl.js";import"./app-logo-icon-B_p9kvRG.js";import"./shield-check-Buig286y.js";import"./car-D1S1GftI.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ve=Be("ChevronDown",Vt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ut=Be("ChevronUp",Ht);function Oe(o,[s,t]){return Math.min(t,Math.max(s,o))}var Ft=[" ","Enter","ArrowUp","ArrowDown"],Wt=[" ","Enter"],Q="Select",[ie,de,zt]=xt(Q),[ne,an]=Tt(Q,[zt,ke]),ue=ke(),[Kt,Y]=ne(Q),[$t,Gt]=ne(Q),He=o=>{const{__scopeSelect:s,children:t,open:i,defaultOpen:r,onOpenChange:u,value:a,defaultValue:l,onValueChange:c,dir:m,name:S,autoComplete:y,disabled:_,required:j,form:C}=o,d=ue(s),[x,g]=n.useState(null),[f,v]=n.useState(null),[B,A]=n.useState(!1),p=ft(m),[w,I]=Ee({prop:i,defaultProp:r??!1,onChange:u,caller:Q}),[E,k]=Ee({prop:a,defaultProp:l,onChange:c,caller:Q}),U=n.useRef(null),F=x?C||!!x.closest("form"):!0,[$,W]=n.useState(new Set),z=Array.from($).map(M=>M.props.value).join(";");return e.jsx(ht,{...d,children:e.jsxs(Kt,{required:j,scope:s,trigger:x,onTriggerChange:g,valueNode:f,onValueNodeChange:v,valueNodeHasChildren:B,onValueNodeHasChildrenChange:A,contentId:je(),value:E,onValueChange:k,open:w,onOpenChange:I,dir:p,triggerPointerDownPosRef:U,disabled:_,children:[e.jsx(ie.Provider,{scope:s,children:e.jsx($t,{scope:o.__scopeSelect,onNativeOptionAdd:n.useCallback(M=>{W(V=>new Set(V).add(M))},[]),onNativeOptionRemove:n.useCallback(M=>{W(V=>{const K=new Set(V);return K.delete(M),K})},[]),children:t})}),F?e.jsxs(ct,{"aria-hidden":!0,required:j,tabIndex:-1,name:S,autoComplete:y,value:E,onChange:M=>k(M.target.value),disabled:_,form:C,children:[E===void 0?e.jsx("option",{value:""}):null,Array.from($)]},z):null]})})};He.displayName=Q;var Ue="SelectTrigger",Fe=n.forwardRef((o,s)=>{const{__scopeSelect:t,disabled:i=!1,...r}=o,u=ue(t),a=Y(Ue,t),l=a.disabled||i,c=H(s,a.onTriggerChange),m=de(t),S=n.useRef("touch"),[y,_,j]=dt(d=>{const x=m().filter(v=>!v.disabled),g=x.find(v=>v.value===a.value),f=ut(x,d,g);f!==void 0&&a.onValueChange(f.value)}),C=d=>{l||(a.onOpenChange(!0),j()),d&&(a.triggerPointerDownPosRef.current={x:Math.round(d.pageX),y:Math.round(d.pageY)})};return e.jsx(gt,{asChild:!0,...u,children:e.jsx(O.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":it(a.value)?"":void 0,...r,ref:c,onClick:R(r.onClick,d=>{d.currentTarget.focus(),S.current!=="mouse"&&C(d)}),onPointerDown:R(r.onPointerDown,d=>{S.current=d.pointerType;const x=d.target;x.hasPointerCapture(d.pointerId)&&x.releasePointerCapture(d.pointerId),d.button===0&&d.ctrlKey===!1&&d.pointerType==="mouse"&&(C(d),d.preventDefault())}),onKeyDown:R(r.onKeyDown,d=>{const x=y.current!=="";!(d.ctrlKey||d.altKey||d.metaKey)&&d.key.length===1&&_(d.key),!(x&&d.key===" ")&&Ft.includes(d.key)&&(C(),d.preventDefault())})})})});Fe.displayName=Ue;var We="SelectValue",ze=n.forwardRef((o,s)=>{const{__scopeSelect:t,className:i,style:r,children:u,placeholder:a="",...l}=o,c=Y(We,t),{onValueNodeHasChildrenChange:m}=c,S=u!==void 0,y=H(s,c.onValueNodeChange);return q(()=>{m(S)},[m,S]),e.jsx(O.span,{...l,ref:y,style:{pointerEvents:"none"},children:it(c.value)?e.jsx(e.Fragment,{children:a}):u})});ze.displayName=We;var qt="SelectIcon",Ke=n.forwardRef((o,s)=>{const{__scopeSelect:t,children:i,...r}=o;return e.jsx(O.span,{"aria-hidden":!0,...r,ref:s,children:i||"▼"})});Ke.displayName=qt;var Yt="SelectPortal",$e=o=>e.jsx(Pt,{asChild:!0,...o});$e.displayName=Yt;var ee="SelectContent",Ge=n.forwardRef((o,s)=>{const t=Y(ee,o.__scopeSelect),[i,r]=n.useState();if(q(()=>{r(new DocumentFragment)},[]),!t.open){const u=i;return u?Le.createPortal(e.jsx(qe,{scope:o.__scopeSelect,children:e.jsx(ie.Slot,{scope:o.__scopeSelect,children:e.jsx("div",{children:o.children})})}),u):null}return e.jsx(Ye,{...o,ref:s})});Ge.displayName=ee;var L=10,[qe,X]=ne(ee),Xt="SelectContentImpl",Zt=_t("SelectContent.RemoveScroll"),Ye=n.forwardRef((o,s)=>{const{__scopeSelect:t,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:u,onPointerDownOutside:a,side:l,sideOffset:c,align:m,alignOffset:S,arrowPadding:y,collisionBoundary:_,collisionPadding:j,sticky:C,hideWhenDetached:d,avoidCollisions:x,...g}=o,f=Y(ee,t),[v,B]=n.useState(null),[A,p]=n.useState(null),w=H(s,h=>B(h)),[I,E]=n.useState(null),[k,U]=n.useState(null),F=de(t),[$,W]=n.useState(!1),z=n.useRef(!1);n.useEffect(()=>{if(v)return Rt(v)},[v]),Et();const M=n.useCallback(h=>{const[T,...D]=F().map(P=>P.ref.current),[b]=D.slice(-1),N=document.activeElement;for(const P of h)if(P===N||(P?.scrollIntoView({block:"nearest"}),P===T&&A&&(A.scrollTop=0),P===b&&A&&(A.scrollTop=A.scrollHeight),P?.focus(),document.activeElement!==N))return},[F,A]),V=n.useCallback(()=>M([I,v]),[M,I,v]);n.useEffect(()=>{$&&V()},[$,V]);const{onOpenChange:K,triggerPointerDownPosRef:G}=f;n.useEffect(()=>{if(v){let h={x:0,y:0};const T=b=>{h={x:Math.abs(Math.round(b.pageX)-(G.current?.x??0)),y:Math.abs(Math.round(b.pageY)-(G.current?.y??0))}},D=b=>{h.x<=10&&h.y<=10?b.preventDefault():v.contains(b.target)||K(!1),document.removeEventListener("pointermove",T),G.current=null};return G.current!==null&&(document.addEventListener("pointermove",T),document.addEventListener("pointerup",D,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",T),document.removeEventListener("pointerup",D,{capture:!0})}}},[v,K,G]),n.useEffect(()=>{const h=()=>K(!1);return window.addEventListener("blur",h),window.addEventListener("resize",h),()=>{window.removeEventListener("blur",h),window.removeEventListener("resize",h)}},[K]);const[pe,ae]=dt(h=>{const T=F().filter(N=>!N.disabled),D=T.find(N=>N.ref.current===document.activeElement),b=ut(T,h,D);b&&setTimeout(()=>b.ref.current.focus())}),me=n.useCallback((h,T,D)=>{const b=!z.current&&!D;(f.value!==void 0&&f.value===T||b)&&(E(h),b&&(z.current=!0))},[f.value]),fe=n.useCallback(()=>v?.focus(),[v]),te=n.useCallback((h,T,D)=>{const b=!z.current&&!D;(f.value!==void 0&&f.value===T||b)&&U(h)},[f.value]),le=i==="popper"?we:Xe,re=le===we?{side:l,sideOffset:c,align:m,alignOffset:S,arrowPadding:y,collisionBoundary:_,collisionPadding:j,sticky:C,hideWhenDetached:d,avoidCollisions:x}:{};return e.jsx(qe,{scope:t,content:v,viewport:A,onViewportChange:p,itemRefCallback:me,selectedItem:I,onItemLeave:fe,itemTextRefCallback:te,focusSelectedItem:V,selectedItemText:k,position:i,isPositioned:$,searchRef:pe,children:e.jsx(Mt,{as:Zt,allowPinchZoom:!0,children:e.jsx(At,{asChild:!0,trapped:f.open,onMountAutoFocus:h=>{h.preventDefault()},onUnmountAutoFocus:R(r,h=>{f.trigger?.focus({preventScroll:!0}),h.preventDefault()}),children:e.jsx(Dt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:a,onFocusOutside:h=>h.preventDefault(),onDismiss:()=>f.onOpenChange(!1),children:e.jsx(le,{role:"listbox",id:f.contentId,"data-state":f.open?"open":"closed",dir:f.dir,onContextMenu:h=>h.preventDefault(),...g,...re,onPlaced:()=>W(!0),ref:w,style:{display:"flex",flexDirection:"column",outline:"none",...g.style},onKeyDown:R(g.onKeyDown,h=>{const T=h.ctrlKey||h.altKey||h.metaKey;if(h.key==="Tab"&&h.preventDefault(),!T&&h.key.length===1&&ae(h.key),["ArrowUp","ArrowDown","Home","End"].includes(h.key)){let b=F().filter(N=>!N.disabled).map(N=>N.ref.current);if(["ArrowUp","End"].includes(h.key)&&(b=b.slice().reverse()),["ArrowUp","ArrowDown"].includes(h.key)){const N=h.target,P=b.indexOf(N);b=b.slice(P+1)}setTimeout(()=>M(b)),h.preventDefault()}})})})})})})});Ye.displayName=Xt;var Jt="SelectItemAlignedPosition",Xe=n.forwardRef((o,s)=>{const{__scopeSelect:t,onPlaced:i,...r}=o,u=Y(ee,t),a=X(ee,t),[l,c]=n.useState(null),[m,S]=n.useState(null),y=H(s,w=>S(w)),_=de(t),j=n.useRef(!1),C=n.useRef(!0),{viewport:d,selectedItem:x,selectedItemText:g,focusSelectedItem:f}=a,v=n.useCallback(()=>{if(u.trigger&&u.valueNode&&l&&m&&d&&x&&g){const w=u.trigger.getBoundingClientRect(),I=m.getBoundingClientRect(),E=u.valueNode.getBoundingClientRect(),k=g.getBoundingClientRect();if(u.dir!=="rtl"){const N=k.left-I.left,P=E.left-N,Z=w.left-P,J=w.width+Z,he=Math.max(J,I.width),xe=window.innerWidth-L,ge=Oe(P,[L,Math.max(L,xe-he)]);l.style.minWidth=J+"px",l.style.left=ge+"px"}else{const N=I.right-k.right,P=window.innerWidth-E.right-N,Z=window.innerWidth-w.right-P,J=w.width+Z,he=Math.max(J,I.width),xe=window.innerWidth-L,ge=Oe(P,[L,Math.max(L,xe-he)]);l.style.minWidth=J+"px",l.style.right=ge+"px"}const U=_(),F=window.innerHeight-L*2,$=d.scrollHeight,W=window.getComputedStyle(m),z=parseInt(W.borderTopWidth,10),M=parseInt(W.paddingTop,10),V=parseInt(W.borderBottomWidth,10),K=parseInt(W.paddingBottom,10),G=z+M+$+K+V,pe=Math.min(x.offsetHeight*5,G),ae=window.getComputedStyle(d),me=parseInt(ae.paddingTop,10),fe=parseInt(ae.paddingBottom,10),te=w.top+w.height/2-L,le=F-te,re=x.offsetHeight/2,h=x.offsetTop+re,T=z+M+h,D=G-T;if(T<=te){const N=U.length>0&&x===U[U.length-1].ref.current;l.style.bottom="0px";const P=m.clientHeight-d.offsetTop-d.offsetHeight,Z=Math.max(le,re+(N?fe:0)+P+V),J=T+Z;l.style.height=J+"px"}else{const N=U.length>0&&x===U[0].ref.current;l.style.top="0px";const Z=Math.max(te,z+d.offsetTop+(N?me:0)+re)+D;l.style.height=Z+"px",d.scrollTop=T-te+d.offsetTop}l.style.margin=`${L}px 0`,l.style.minHeight=pe+"px",l.style.maxHeight=F+"px",i?.(),requestAnimationFrame(()=>j.current=!0)}},[_,u.trigger,u.valueNode,l,m,d,x,g,u.dir,i]);q(()=>v(),[v]);const[B,A]=n.useState();q(()=>{m&&A(window.getComputedStyle(m).zIndex)},[m]);const p=n.useCallback(w=>{w&&C.current===!0&&(v(),f?.(),C.current=!1)},[v,f]);return e.jsx(eo,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:j,onScrollButtonChange:p,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:B},children:e.jsx(O.div,{...r,ref:y,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});Xe.displayName=Jt;var Qt="SelectPopperPosition",we=n.forwardRef((o,s)=>{const{__scopeSelect:t,align:i="start",collisionPadding:r=L,...u}=o,a=ue(t);return e.jsx(St,{...a,...u,ref:s,align:i,collisionPadding:r,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});we.displayName=Qt;var[eo,_e]=ne(ee,{}),ye="SelectViewport",Ze=n.forwardRef((o,s)=>{const{__scopeSelect:t,nonce:i,...r}=o,u=X(ye,t),a=_e(ye,t),l=H(s,u.onViewportChange),c=n.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),e.jsx(ie.Slot,{scope:t,children:e.jsx(O.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:R(r.onScroll,m=>{const S=m.currentTarget,{contentWrapper:y,shouldExpandOnScrollRef:_}=a;if(_?.current&&y){const j=Math.abs(c.current-S.scrollTop);if(j>0){const C=window.innerHeight-L*2,d=parseFloat(y.style.minHeight),x=parseFloat(y.style.height),g=Math.max(d,x);if(g<C){const f=g+j,v=Math.min(C,f),B=f-v;y.style.height=v+"px",y.style.bottom==="0px"&&(S.scrollTop=B>0?B:0,y.style.justifyContent="flex-end")}}}c.current=S.scrollTop})})})]})});Ze.displayName=ye;var Je="SelectGroup",[to,oo]=ne(Je),no=n.forwardRef((o,s)=>{const{__scopeSelect:t,...i}=o,r=je();return e.jsx(to,{scope:t,id:r,children:e.jsx(O.div,{role:"group","aria-labelledby":r,...i,ref:s})})});no.displayName=Je;var Qe="SelectLabel",ro=n.forwardRef((o,s)=>{const{__scopeSelect:t,...i}=o,r=oo(Qe,t);return e.jsx(O.div,{id:r.id,...i,ref:s})});ro.displayName=Qe;var ce="SelectItem",[so,et]=ne(ce),tt=n.forwardRef((o,s)=>{const{__scopeSelect:t,value:i,disabled:r=!1,textValue:u,...a}=o,l=Y(ce,t),c=X(ce,t),m=l.value===i,[S,y]=n.useState(u??""),[_,j]=n.useState(!1),C=H(s,f=>c.itemRefCallback?.(f,i,r)),d=je(),x=n.useRef("touch"),g=()=>{r||(l.onValueChange(i),l.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(so,{scope:t,value:i,disabled:r,textId:d,isSelected:m,onItemTextChange:n.useCallback(f=>{y(v=>v||(f?.textContent??"").trim())},[]),children:e.jsx(ie.ItemSlot,{scope:t,value:i,disabled:r,textValue:S,children:e.jsx(O.div,{role:"option","aria-labelledby":d,"data-highlighted":_?"":void 0,"aria-selected":m&&_,"data-state":m?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...a,ref:C,onFocus:R(a.onFocus,()=>j(!0)),onBlur:R(a.onBlur,()=>j(!1)),onClick:R(a.onClick,()=>{x.current!=="mouse"&&g()}),onPointerUp:R(a.onPointerUp,()=>{x.current==="mouse"&&g()}),onPointerDown:R(a.onPointerDown,f=>{x.current=f.pointerType}),onPointerMove:R(a.onPointerMove,f=>{x.current=f.pointerType,r?c.onItemLeave?.():x.current==="mouse"&&f.currentTarget.focus({preventScroll:!0})}),onPointerLeave:R(a.onPointerLeave,f=>{f.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:R(a.onKeyDown,f=>{c.searchRef?.current!==""&&f.key===" "||(Wt.includes(f.key)&&g(),f.key===" "&&f.preventDefault())})})})})});tt.displayName=ce;var se="SelectItemText",ot=n.forwardRef((o,s)=>{const{__scopeSelect:t,className:i,style:r,...u}=o,a=Y(se,t),l=X(se,t),c=et(se,t),m=Gt(se,t),[S,y]=n.useState(null),_=H(s,g=>y(g),c.onItemTextChange,g=>l.itemTextRefCallback?.(g,c.value,c.disabled)),j=S?.textContent,C=n.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:j},c.value),[c.disabled,c.value,j]),{onNativeOptionAdd:d,onNativeOptionRemove:x}=m;return q(()=>(d(C),()=>x(C)),[d,x,C]),e.jsxs(e.Fragment,{children:[e.jsx(O.span,{id:c.textId,...u,ref:_}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Le.createPortal(u.children,a.valueNode):null]})});ot.displayName=se;var nt="SelectItemIndicator",rt=n.forwardRef((o,s)=>{const{__scopeSelect:t,...i}=o;return et(nt,t).isSelected?e.jsx(O.span,{"aria-hidden":!0,...i,ref:s}):null});rt.displayName=nt;var Ce="SelectScrollUpButton",st=n.forwardRef((o,s)=>{const t=X(Ce,o.__scopeSelect),i=_e(Ce,o.__scopeSelect),[r,u]=n.useState(!1),a=H(s,i.onScrollButtonChange);return q(()=>{if(t.viewport&&t.isPositioned){let l=function(){const m=c.scrollTop>0;u(m)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),r?e.jsx(lt,{...o,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});st.displayName=Ce;var be="SelectScrollDownButton",at=n.forwardRef((o,s)=>{const t=X(be,o.__scopeSelect),i=_e(be,o.__scopeSelect),[r,u]=n.useState(!1),a=H(s,i.onScrollButtonChange);return q(()=>{if(t.viewport&&t.isPositioned){let l=function(){const m=c.scrollHeight-c.clientHeight,S=Math.ceil(c.scrollTop)<m;u(S)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),r?e.jsx(lt,{...o,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});at.displayName=be;var lt=n.forwardRef((o,s)=>{const{__scopeSelect:t,onAutoScroll:i,...r}=o,u=X("SelectScrollButton",t),a=n.useRef(null),l=de(t),c=n.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return n.useEffect(()=>()=>c(),[c]),q(()=>{l().find(S=>S.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),e.jsx(O.div,{"aria-hidden":!0,...r,ref:s,style:{flexShrink:0,...r.style},onPointerDown:R(r.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(i,50))}),onPointerMove:R(r.onPointerMove,()=>{u.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(i,50))}),onPointerLeave:R(r.onPointerLeave,()=>{c()})})}),ao="SelectSeparator",lo=n.forwardRef((o,s)=>{const{__scopeSelect:t,...i}=o;return e.jsx(O.div,{"aria-hidden":!0,...i,ref:s})});lo.displayName=ao;var Ne="SelectArrow",co=n.forwardRef((o,s)=>{const{__scopeSelect:t,...i}=o,r=ue(t),u=Y(Ne,t),a=X(Ne,t);return u.open&&a.position==="popper"?e.jsx(wt,{...r,...i,ref:s}):null});co.displayName=Ne;var io="SelectBubbleInput",ct=n.forwardRef(({__scopeSelect:o,value:s,...t},i)=>{const r=n.useRef(null),u=H(i,r),a=Ot(s);return n.useEffect(()=>{const l=r.current;if(!l)return;const c=window.HTMLSelectElement.prototype,S=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==s&&S){const y=new Event("change",{bubbles:!0});S.call(l,s),l.dispatchEvent(y)}},[a,s]),e.jsx(O.select,{...t,style:{...vt,...t.style},ref:u,defaultValue:s})});ct.displayName=io;function it(o){return o===""||o===void 0}function dt(o){const s=Ct(o),t=n.useRef(""),i=n.useRef(0),r=n.useCallback(a=>{const l=t.current+a;s(l),(function c(m){t.current=m,window.clearTimeout(i.current),m!==""&&(i.current=window.setTimeout(()=>c(""),1e3))})(l)},[s]),u=n.useCallback(()=>{t.current="",window.clearTimeout(i.current)},[]);return n.useEffect(()=>()=>window.clearTimeout(i.current),[]),[t,r,u]}function ut(o,s,t){const r=s.length>1&&Array.from(s).every(m=>m===s[0])?s[0]:s,u=t?o.indexOf(t):-1;let a=uo(o,Math.max(u,0));r.length===1&&(a=a.filter(m=>m!==t));const c=a.find(m=>m.textValue.toLowerCase().startsWith(r.toLowerCase()));return c!==t?c:void 0}function uo(o,s){return o.map((t,i)=>o[(s+i)%o.length])}var po=He,mo=Fe,fo=ze,ho=Ke,xo=$e,go=Ge,vo=Ze,So=tt,wo=ot,yo=rt,Co=st,bo=at;function No({...o}){return e.jsx(po,{"data-slot":"select",...o})}function jo({...o}){return e.jsx(fo,{"data-slot":"select-value",...o})}function _o({className:o,children:s,...t}){return e.jsxs(mo,{"data-slot":"select-trigger",className:oe("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-full items-center justify-between rounded-md border bg-transparent px-3 py-2 text-sm shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 [&>span]:line-clamp-1",o),...t,children:[s,e.jsx(ho,{asChild:!0,children:e.jsx(Ve,{className:"size-4 opacity-50"})})]})}function Io({className:o,children:s,position:t="popper",...i}){return e.jsx(xo,{children:e.jsxs(go,{"data-slot":"select-content",className:oe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",o),position:t,...i,children:[e.jsx(Po,{}),e.jsx(vo,{className:oe("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(Ro,{})]})})}function To({className:o,children:s,...t}){return e.jsxs(So,{"data-slot":"select-item",className:oe("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",o),...t,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(yo,{children:e.jsx(kt,{className:"size-4"})})}),e.jsx(wo,{children:s})]})}function Po({className:o,...s}){return e.jsx(Co,{"data-slot":"select-scroll-up-button",className:oe("flex cursor-default items-center justify-center py-1",o),...s,children:e.jsx(Ut,{className:"size-4"})})}function Ro({className:o,...s}){return e.jsx(bo,{"data-slot":"select-scroll-down-button",className:oe("flex cursor-default items-center justify-center py-1",o),...s,children:e.jsx(Ve,{className:"size-4"})})}function ln({bookings:o=[],initialBookingId:s}){const{auth:t}=pt().props,i=t.user,[r,u]=n.useState(s??o[0]?.chat_booking_id??null),[a,l]=n.useState([]),[c,m]=n.useState(""),[S,y]=n.useState(!1),[_,j]=n.useState(!1),[C,d]=n.useState(null),x=n.useRef(null),g=n.useMemo(()=>r?o.find(p=>p.chat_booking_id===r)??null:null,[o,r]);n.useEffect(()=>{if(!r){l([]);return}let p=!0;const w=async(E=!1)=>{E||(y(!0),d(null));try{const k=await Me.get(`/chat/bookings/${r}/messages`);if(!p)return;l(k.data.messages??[])}catch(k){if(console.error(k),!p)return;E||d("Unable to load messages. Please try again.")}finally{p&&!E&&y(!1)}};w();const I=setInterval(()=>w(!0),5e3);return()=>{p=!1,clearInterval(I)}},[r]),n.useEffect(()=>{x.current&&(x.current.scrollTop=x.current.scrollHeight)},[a]),n.useEffect(()=>{if(!o.length){u(null);return}(!r||!o.some(p=>p.chat_booking_id===r))&&u(s??o[0].chat_booking_id)},[o,r,s]);const f=async p=>{if(p.preventDefault(),!r||_)return;const w=c.trim();if(w){j(!0),d(null);try{const I=await Me.post(`/chat/bookings/${r}/messages`,{message:w});I.data.message&&l(E=>[...E,I.data.message]),m("")}catch(I){console.error(I),d("Unable to send message. Please try again.")}finally{j(!1)}}},v=p=>{switch(p){case"completed":return"default";case"pending":return"secondary";case"in_progress":return"outline";case"cancelled":return"destructive";default:return"outline"}},B=p=>new Date(p).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),A=p=>p.split(" ").map(w=>w[0]).join("").slice(0,2).toUpperCase();return e.jsxs(yt,{children:[e.jsx(mt,{title:"Messages - Driver"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-hidden p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Messages"}),e.jsx("p",{className:"text-muted-foreground",children:"Keep your customers updated and confirm trip details in real time."})]}),o.length===0?e.jsx(ve,{className:"border-dashed",children:e.jsxs(Se,{className:"py-16 text-center space-y-3",children:[e.jsx(Ae,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"text-lg font-semibold",children:"No conversations yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Accept a booking to start chatting with customers."})]})}):e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs(ve,{children:[e.jsxs(Ie,{children:[e.jsx(Te,{children:"Your Rides"}),e.jsx(Pe,{children:"Select a booking to open its chat thread"})]}),e.jsxs(Se,{className:"space-y-3",children:[e.jsxs(No,{value:r?String(r):void 0,onValueChange:p=>u(Number(p)),children:[e.jsx(_o,{children:e.jsx(jo,{placeholder:"Choose booking"})}),e.jsx(Io,{children:o.map(p=>e.jsxs(To,{value:String(p.chat_booking_id),children:["#",p.latest_booking_id," · ",p.customer?.name||"Customer"]},p.chat_booking_id))})]}),e.jsx("div",{className:"space-y-3 max-h-[420px] overflow-y-auto pr-1",children:o.map(p=>{const w=r===p.chat_booking_id;return e.jsxs("button",{onClick:()=>u(p.chat_booking_id),className:`w-full text-left border rounded-xl p-4 transition ${w?"border-primary shadow-lg shadow-primary/10 bg-primary/5":"border-border bg-background hover:border-primary/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"font-semibold text-sm",children:["#",p.latest_booking_id," · ",p.customer?.name||"Customer"]}),e.jsx(Re,{variant:v(p.status),className:"text-[10px]",children:p.status.replace("_"," ")})]}),e.jsxs("p",{className:"mt-1 text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(Lt,{className:"h-3 w-3"}),p.pickup_location]}),e.jsx("p",{className:"text-xs text-muted-foreground ml-4 truncate",children:p.dropoff_location})]},p.chat_booking_id)})})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(ve,{className:"h-full",children:[e.jsxs(Ie,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-5 w-5 text-primary"}),"Conversation"]}),e.jsx(Pe,{children:"Respond quickly to provide a smoother pickup experience."})]}),e.jsxs(Se,{className:"space-y-4",children:[g&&e.jsxs("div",{className:"rounded-xl border p-4 bg-muted/40 flex items-center gap-4",children:[e.jsxs(bt,{className:"h-12 w-12 border",children:[e.jsx(Nt,{src:g.customer?.avatar_url??(g.customer?.name?`https://ui-avatars.com/api/?name=${encodeURIComponent(g.customer.name)}&background=0ea5e9&color=fff`:void 0)}),e.jsx(jt,{children:A(g.customer?.name||"Customer")})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-semibold",children:g.customer?.name||"Customer"}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Bt,{className:"h-3 w-3"}),g.customer?.phone||"No phone"]}),g.vehicle_type&&e.jsx(Re,{variant:"outline",className:"capitalize",children:g.vehicle_type}),g.passengers&&e.jsxs("span",{children:[g.passengers," pax"]})]})]})]}),C&&e.jsx("div",{className:"rounded-lg border border-destructive/30 bg-destructive/10 px-3 py-2 text-sm text-destructive",children:C}),e.jsx("div",{ref:x,className:"h-96 rounded-xl border bg-background p-4 overflow-y-auto space-y-3",children:S?e.jsxs("div",{className:"flex h-full items-center justify-center text-muted-foreground",children:[e.jsx(De,{className:"h-5 w-5 animate-spin mr-2"}),"Loading conversation..."]}):a.length===0?e.jsx("div",{className:"text-center text-muted-foreground mt-10",children:"Start the conversation and let the customer know you’re on the way."}):a.map(p=>{const w=p.sender_id===i.id,I=p.is_system?"bg-amber-100 text-amber-900":w?"bg-primary text-primary-foreground":"bg-muted text-foreground";return e.jsxs("div",{className:`flex flex-col ${w?"items-end text-right":"items-start"}`,children:[e.jsx("div",{className:`px-4 py-2 rounded-2xl max-w-[80%] ${I}`,children:p.message}),e.jsxs("span",{className:"mt-1 text-[10px] text-muted-foreground",children:[p.sender_name," ·"," ",p.created_at?B(p.created_at):""]})]},p.id)})}),g&&e.jsxs("form",{className:"space-y-2",onSubmit:f,children:[e.jsx("textarea",{rows:3,value:c,onChange:p=>m(p.target.value),className:"w-full rounded-xl border border-input bg-background px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"Send a quick update..."}),e.jsx("div",{className:"flex justify-end",children:e.jsx(It,{type:"submit",disabled:_,children:_?e.jsxs(e.Fragment,{children:[e.jsx(De,{className:"h-4 w-4 animate-spin mr-2"}),"Sending"]}):"Send Message"})})]})]})]})})]})]})]})}export{ln as default};
