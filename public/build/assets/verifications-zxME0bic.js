import{r as t,j as e,H as B,a as C}from"./app-D2KhOlPS.js";import{A as D}from"./app-layout-BuZHd0iL.js";import{C as a,a as i,b as A,c as _}from"./card-CTMh3Ccf.js";import{B as l}from"./button-DRgzOgcv.js";import{A as F,a as H,b as E}from"./ErrorBoundary-DhJ2_a8D.js";import{C as I}from"./clock-CV8Bj2CJ.js";import{C as v}from"./circle-check-big-CGACond5.js";import{C as N,a as T}from"./credit-card-B8l5jNGR.js";import{C as q}from"./circle-alert-5v61Kg-F.js";import{c as S}from"./createLucideIcon-EMwdt5a8.js";import{P as U}from"./phone-DNgV663h.js";import{U as X}from"./user-_A99VBA_.js";import{E as R}from"./eye-D77SW5PE.js";import{C as G}from"./calendar-Di2PWPNL.js";/* empty css            */import"./index-C3HMWAIV.js";import"./index-C-hE0QHb.js";import"./index-6XFs-mRv.js";import"./index-D5JU00dO.js";import"./index-BHDVE5T7.js";import"./floating-ui.react-dom-BzSDvg-6.js";import"./index-1ri6WIs6.js";import"./index-D329iiHL.js";import"./index-CMWG4mbA.js";import"./index-tyedukNl.js";import"./message-square-B3ZYgRdM.js";import"./app-logo-icon-B_p9kvRG.js";import"./shield-check-Buig286y.js";import"./car-D1S1GftI.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],K=S("House",J);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Q=S("Mail",O);function _e({pendingUsers:b,approvedUsers:w,rejectedUsers:y,stats:h}){const[s,j]=t.useState("pending"),[n,c]=t.useState(null),[L,f]=t.useState(!1),[M,g]=t.useState(!1),[d,u]=t.useState(""),[m,x]=t.useState(null),[o,p]=t.useState(!1),P=r=>{p(!0),C.post(`/admin/verifications/${r}/approve`,{},{onSuccess:()=>{f(!1),c(null)},onFinish:()=>p(!1)})},$=r=>{if(!d.trim()){alert("Please provide a rejection reason");return}p(!0),C.post(`/admin/verifications/${r}/reject`,{reason:d},{onSuccess:()=>{g(!1),c(null),u("")},onFinish:()=>p(!1)})},k=s==="pending"?b:s==="approved"?w:y,V=r=>r.split(" ").map(z=>z[0]).join("").toUpperCase().slice(0,2);return e.jsxs(D,{children:[e.jsx(B,{title:"Driver Verifications - Admin"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto p-4 md:p-6",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold tracking-tight bg-gradient-to-r from-primary via-primary/90 to-primary/70 bg-clip-text text-transparent",children:"Driver Verifications"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(a,{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-950 dark:to-yellow-900 border-yellow-300",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Pending"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-900 dark:text-yellow-100",children:h.pending})]}),e.jsx(I,{className:"h-8 w-8 text-yellow-600 dark:text-yellow-400"})]})})}),e.jsx(a,{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950 dark:to-green-900 border-green-300",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Approved"}),e.jsx("p",{className:"text-3xl font-bold text-green-900 dark:text-green-100",children:h.approved})]}),e.jsx(v,{className:"h-8 w-8 text-green-600 dark:text-green-400"})]})})}),e.jsx(a,{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-950 dark:to-red-900 border-red-300",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Rejected"}),e.jsx("p",{className:"text-3xl font-bold text-red-900 dark:text-red-100",children:h.rejected})]}),e.jsx(N,{className:"h-8 w-8 text-red-600 dark:text-red-400"})]})})})]}),e.jsx("div",{className:"border-b border-border",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>j("pending"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${s==="pending"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-gray-300"}`,children:["Pending (",b.length,")"]}),e.jsxs("button",{onClick:()=>j("approved"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${s==="approved"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-gray-300"}`,children:["Approved (",w.length,")"]}),e.jsxs("button",{onClick:()=>j("rejected"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${s==="rejected"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground hover:border-gray-300"}`,children:["Rejected (",y.length,")"]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:k.length===0?e.jsx(a,{children:e.jsxs(i,{className:"p-12 text-center",children:[e.jsx(q,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4 opacity-50"}),e.jsxs("p",{className:"text-muted-foreground font-medium",children:["No ",s," verifications"]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[s==="pending"&&"All caught up! No pending verification requests.",s==="approved"&&"No approved drivers yet.",s==="rejected"&&"No rejected verifications."]})]})}):k.map(r=>e.jsx(a,{className:"shadow-lg",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs(F,{className:"h-24 w-24 border-4 border-primary/20",children:[e.jsx(H,{src:r.avatar_url,alt:r.name}),e.jsx(E,{children:V(r.name)})]})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold",children:r.name}),e.jsx("p",{className:"text-muted-foreground",children:"Driver Application"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:r.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:r.phone})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:["Age: ",r.age]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:r.address})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),"Driver's License"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Front"}),e.jsxs("div",{className:"relative group cursor-pointer border-2 rounded-lg overflow-hidden hover:border-primary transition-colors",onClick:()=>x({url:r.driver_license_front_url,title:`${r.name} - License Front`}),children:[e.jsx("img",{src:r.driver_license_front_url,alt:"License Front",className:"w-full h-32 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(R,{className:"h-6 w-6 text-white"})})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Back"}),e.jsxs("div",{className:"relative group cursor-pointer border-2 rounded-lg overflow-hidden hover:border-primary transition-colors",onClick:()=>x({url:r.driver_license_back_url,title:`${r.name} - License Back`}),children:[e.jsx("img",{src:r.driver_license_back_url,alt:"License Back",className:"w-full h-32 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(R,{className:"h-6 w-6 text-white"})})]})]})]})]}),s==="pending"&&e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(l,{onClick:()=>{c(r),f(!0)},className:"bg-green-600 hover:bg-green-700",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Approve"]}),e.jsxs(l,{onClick:()=>{c(r),g(!0)},variant:"destructive",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Reject"]})]}),s==="rejected"&&r.rejection_reason&&e.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 rounded-lg",children:[e.jsx("p",{className:"text-sm font-semibold text-red-900 dark:text-red-100",children:"Rejection Reason:"}),e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200 mt-1",children:r.rejection_reason})]}),s==="approved"&&r.verified_at&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsxs("span",{children:["Verified on ",new Date(r.verified_at).toLocaleDateString()]})]})]})]})})},r.id))}),L&&n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(a,{className:"max-w-md w-full",children:[e.jsx(A,{children:e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5 text-green-600"}),"Approve Verification"]})}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("p",{children:["Are you sure you want to approve ",e.jsx("strong",{children:n.name}),"'s verification?"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"They will gain full access to accept ride requests immediately."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(l,{variant:"outline",onClick:()=>{f(!1),c(null)},disabled:o,children:"Cancel"}),e.jsx(l,{onClick:()=>P(n.id),className:"bg-green-600 hover:bg-green-700",disabled:o,children:o?"Approving...":"Approve"})]})]})]})}),M&&n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs(a,{className:"max-w-md w-full",children:[e.jsx(A,{children:e.jsxs(_,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5 text-red-600"}),"Reject Verification"]})}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("p",{children:["Provide a reason for rejecting ",e.jsx("strong",{children:n.name}),"'s verification:"]}),e.jsx("textarea",{value:d,onChange:r=>u(r.target.value),className:"w-full border rounded-md p-3 min-h-[100px] resize-none",placeholder:"e.g., License image is unclear, please upload a clearer photo...",required:!0}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(l,{variant:"outline",onClick:()=>{g(!1),c(null),u("")},disabled:o,children:"Cancel"}),e.jsx(l,{onClick:()=>$(n.id),variant:"destructive",disabled:o||!d.trim(),children:o?"Rejecting...":"Reject"})]})]})]})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",onClick:()=>x(null),children:e.jsxs("div",{className:"max-w-6xl max-h-screen flex flex-col",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-white font-semibold",children:m.title}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>x(null),className:"bg-white",children:"Close"})]}),e.jsx("img",{src:m.url,alt:m.title,className:"max-w-full max-h-[85vh] object-contain rounded-lg"})]})})]})]})}export{_e as default};
