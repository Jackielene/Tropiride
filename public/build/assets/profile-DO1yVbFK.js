import{r as c,j as e,u as de,L as oe,a as _}from"./app-BhXyXnS2.js";import{E as b,x as X,w as Z,i as v,h as P,m as h,B,au as me,av as z,O as xe,F as T,aw as pe,A as E,ax as he,$ as ue,b as ge,ay as fe,g as I,V as k,C as ye,j as je}from"./index-DM_jH5Iz.js";import{T as Ne}from"./TropirideNavbar-Cj2uAdfV.js";import{C as R,a as $,b as K,c as W,d as G}from"./card-9IM8v4mu.js";import{E as be,A as ve,a as we,b as Ce}from"./ErrorBoundary-DEX0Ltv_.js";import{c as Fe,B as g}from"./button-CtzH_zQO.js";import{L as m}from"./label-D5bEVT6v.js";import{B as M}from"./badge-BjIwJJPt.js";import{P as Se}from"./index-CZQb3Rtj.js";import{I as N}from"./input-DozoqVLP.js";import{D as Ae,a as _e,b as Te,c as Ee,d as Ie,e as Pe}from"./dialog-Dz5ka2-n.js";/* empty css            */import"./index-Mz6-9H1I.js";import"./clsx-B-dksMZM.js";import"./index-D8Ur9APl.js";import"./index-BntJkM1G.js";import"./createLucideIcon-C3hcaC7i.js";import"./index-_k09FYqd.js";var De="Separator",J="horizontal",Ue=["horizontal","vertical"],ee=c.forwardRef((u,l)=>{const{decorative:x,orientation:s=J,...p}=u,d=Le(s)?s:J,n=x?{role:"none"}:{"aria-orientation":d==="vertical"?d:void 0,role:"separator"};return e.jsx(Se.div,{"data-orientation":d,...n,...p,ref:l})});ee.displayName=De;function Le(u){return Ue.includes(u)}var Be=ee;function Q({className:u,orientation:l="horizontal",decorative:x=!0,...s}){return e.jsx(Be,{"data-slot":"separator-root",decorative:x,orientation:l,className:Fe("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",u),...s})}function ze({user:u,profileData:l,onDataChange:x}){const[s,p]=c.useState({name:l.name||"",email:l.email||"",phone:l.phone||"",age:l.age||"",address:l.address||""});c.useEffect(()=>{const i={name:l.name||"",email:l.email||"",phone:l.phone||"",age:l.age||"",address:l.address||""};p(n=>n.name!==i.name||n.email!==i.email||n.phone!==i.phone||n.age!==i.age||n.address!==i.address?i:n)},[l.name,l.email,l.phone,l.age,l.address]),c.useEffect(()=>{const i=setTimeout(()=>{x(s)},0);return()=>clearTimeout(i)},[s.name,s.email,s.phone,s.age,s.address,x]);const d=i=>{const{name:n,value:w}=i.target;p(f=>({...f,[n]:w}))};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"name",className:"flex items-center gap-2 text-gray-700 font-semibold",children:[e.jsx(b,{className:"text-cyan-600"}),"Full Name"]}),e.jsx(N,{id:"name",name:"name",type:"text",value:s.name,onChange:d,required:!0,className:"mt-1 border-2 border-cyan-200 focus:border-cyan-500 focus:ring-cyan-500 rounded-lg",placeholder:"Enter your full name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"email",className:"flex items-center gap-2 text-gray-700 font-semibold",children:[e.jsx(X,{className:"text-cyan-600"}),"Email Address"]}),e.jsx(N,{id:"email",name:"email",type:"email",value:s.email,onChange:d,required:!0,className:"mt-1 border-2 border-cyan-200 focus:border-cyan-500 focus:ring-cyan-500 rounded-lg",placeholder:"Enter your email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"phone",className:"flex items-center gap-2 text-gray-700 font-semibold",children:[e.jsx(Z,{className:"text-cyan-600"}),"Phone Number"]}),e.jsx(N,{id:"phone",name:"phone",type:"tel",value:s.phone,onChange:d,className:"mt-1 border-2 border-cyan-200 focus:border-cyan-500 focus:ring-cyan-500 rounded-lg",placeholder:"Enter your phone number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{htmlFor:"age",className:"flex items-center gap-2 text-gray-700 font-semibold",children:[e.jsx(v,{className:"text-cyan-600"}),"Age"]}),e.jsx(N,{id:"age",name:"age",type:"number",min:"1",max:"120",value:s.age,onChange:d,className:"mt-1 border-2 border-cyan-200 focus:border-cyan-500 focus:ring-cyan-500 rounded-lg",placeholder:"Enter your age"})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsxs(m,{htmlFor:"address",className:"flex items-center gap-2 text-gray-700 font-semibold",children:[e.jsx(P,{className:"text-cyan-600"}),"Address"]}),e.jsx(N,{id:"address",name:"address",type:"text",value:s.address,onChange:d,className:"mt-1 border-2 border-cyan-200 focus:border-cyan-500 focus:ring-cyan-500 rounded-lg",placeholder:"Enter your address"})]})]})})}function ta(){const{auth:u,flash:l,bookings:x=[]}=de().props,s=u.user,[p,d]=c.useState(!1),[i,n]=c.useState(!1),[w,f]=c.useState(!1),[O,C]=c.useState({}),[y,F]=c.useState(null),[ae,D]=c.useState(!1),[U,S]=c.useState(null),[r,L]=c.useState({name:s?.name||"",email:s?.email||"",phone:s?.phone||"",age:s?.age?.toString()||"",address:s?.address||""}),H=()=>{if(!s?.avatar_url)return`https://ui-avatars.com/api/?name=${encodeURIComponent(r.name)}&background=0ea5e9&color=ffffff&size=128`;const a=s.avatar_url.includes("?")?"&":"?";return`${s.avatar_url}${a}t=${Date.now()}`},se=c.useCallback(a=>{L(t=>t.name!==a.name||t.email!==a.email||t.phone!==a.phone||t.age!==a.age||t.address!==a.address?a:t)},[]);c.useEffect(()=>{if(!p&&s){const a={name:s?.name||"",email:s?.email||"",phone:s?.phone||"",age:s?.age?.toString()||"",address:s?.address||""};L(t=>t.name!==a.name||t.email!==a.email||t.phone!==a.phone||t.age!==a.age||t.address!==a.address?a:t)}},[s?.name,s?.email,s?.phone,s?.age,s?.address,p]);const te=()=>{f(!0),C({});const a={name:r.name||"",email:r.email||"",phone:r.phone&&r.phone.trim()?r.phone.trim():null,age:r.age&&r.age.toString().trim()?parseInt(r.age.toString()):null,address:r.address&&r.address.trim()?r.address.trim():null};console.log("Saving profile data:",a),console.log("Current profileData:",r),console.log("Phone type:",typeof r.phone,"value:",r.phone),console.log("Age type:",typeof r.age,"value:",r.age),console.log("Address type:",typeof r.address,"value:",r.address),_.patch("/tropiride/profile",a,{onSuccess:()=>{d(!1),f(!1),C({})},onError:t=>{console.error("Profile update failed:",t),f(!1),t&&typeof t=="object"&&C(t)},onFinish:()=>{f(!1)}})},re=()=>{L({name:s?.name||"",email:s?.email||"",phone:s?.phone||"",age:s?.age?.toString()||"",address:s?.address||""}),d(!1),C({})},le=a=>{const t=a.target.files?.[0];if(t){if(n(!0),t.size>2*1024*1024){alert("Image size must be less than 2MB"),n(!1);return}if(!t.type.startsWith("image/")){alert("Please upload an image file"),n(!1);return}const j=new FormData;j.append("avatar",t),console.log("Uploading avatar:",t.name,t.size,"bytes"),_.post("/tropiride/profile/avatar",j,{forceFormData:!0,preserveScroll:!0,onSuccess:o=>{console.log("Avatar upload successful"),console.log("Page props:",o.props),console.log("Auth user after upload:",o.props.auth?.user),n(!1),setTimeout(()=>{_.reload({only:["auth"]})},100)},onError:o=>{console.error("Avatar upload failed:",o),n(!1),o.avatar?alert(`Failed to upload avatar: ${Array.isArray(o.avatar)?o.avatar[0]:o.avatar}`):alert("Failed to upload avatar. Please try again.")},onFinish:()=>{n(!1)}})}},ne=a=>{S(a),D(!0)},ie=()=>{U&&(F(U),D(!1),_.post(`/tropiride/bookings/${U}/cancel`,{},{onSuccess:()=>{F(null),S(null)},onError:a=>{console.error("Cancel booking failed:",a),F(null),S(null),alert("Failed to cancel booking. Please try again.")},onFinish:()=>{F(null)}}))},q=a=>{a||(D(!1),y||S(null))},ce=a=>{switch(a.toLowerCase()){case"pending":return{label:"Pending",icon:E,className:"bg-yellow-50 text-yellow-700 border-yellow-300",iconClassName:"text-yellow-600"};case"confirmed":return{label:"Confirmed",icon:je,className:"bg-blue-50 text-blue-700 border-blue-300",iconClassName:"text-blue-600"};case"in_progress":return{label:"In Progress",icon:T,className:"bg-purple-50 text-purple-700 border-purple-300",iconClassName:"text-purple-600"};case"completed":return{label:"Completed",icon:ye,className:"bg-green-50 text-green-700 border-green-300",iconClassName:"text-green-600"};case"cancelled":return{label:"Cancelled",icon:B,className:"bg-red-50 text-red-700 border-red-300",iconClassName:"text-red-600"};default:return{label:a.charAt(0).toUpperCase()+a.slice(1),icon:I,className:"bg-gray-50 text-gray-700 border-gray-300",iconClassName:"text-gray-600"}}},A=Array.isArray(x)?x.map(a=>{try{const t=a.created_at||a.requested_at,j=t?new Date(t):new Date,o=ce(a.status||"pending");let V=null;if(a.pickup_date){const Re=new Date(a.pickup_date);V={date:a.pickup_date,time:a.pickup_time||null,formatted:a.pickup_date?new Date(a.pickup_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null}}let Y=null;return a.return_date&&(Y={date:a.return_date,time:a.return_time||null,formatted:a.return_date?new Date(a.return_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null}),{id:a.id,vehicle:a.user_name||s?.name||"Ride Request",userName:a.user_name||s?.name||"Unknown",date:j.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),time:j.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),status:a.status||"pending",statusInfo:o,price:Number(a.estimated_fare)||0,rating:0,pickupLocation:a.pickup_location||"",dropoffLocation:a.dropoff_location||"",distance:Number(a.distance_km)||0,timeMinutes:Number(a.estimated_time_minutes)||0,pickupDate:V,returnDate:Y,vehicleType:a.vehicle_type||null,passengers:a.passengers||null}}catch(t){return console.error("Error processing booking:",a,t),null}}).filter(a=>a!==null):[];return e.jsxs(e.Fragment,{children:[e.jsx(Ne,{}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-cyan-50/30 to-blue-50/30",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs(h.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(b,{className:"text-white text-xl"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent",children:"My Profile"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account information and view your bookings"})]})]}),l?.status&&e.jsx(h.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-4 p-4 bg-gradient-to-r from-emerald-50 to-green-50 border-2 border-emerald-200 rounded-xl shadow-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-green-600 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"h-6 w-6 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-semibold text-emerald-800",children:l.status})})]})}),l?.error&&e.jsx(h.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-4 p-4 bg-gradient-to-r from-red-50 to-pink-50 border-2 border-red-200 rounded-xl shadow-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-pink-600 rounded-full flex items-center justify-center",children:e.jsx(B,{className:"h-5 w-5 text-white"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-semibold text-red-800",children:l.error})})]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx(h.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},className:"lg:col-span-1",children:e.jsx(R,{className:"overflow-hidden shadow-xl border-0 bg-gradient-to-br from-white to-cyan-50/50",children:e.jsxs($,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"relative group",children:[e.jsx(be,{children:e.jsxs(ve,{className:"w-32 h-32 border-4 border-cyan-200 shadow-lg",children:[e.jsx(we,{src:H(),alt:r.name,className:i?"opacity-50":"",onError:a=>{console.error("Avatar load error:",a),console.log("Avatar URL:",s?.avatar_url),console.log("User avatar field:",s?.avatar),console.log("Attempted src:",H())},onLoad:()=>{console.log("Avatar loaded successfully:",s?.avatar_url)}},`avatar-${s?.avatar||"default"}-${s?.updated_at||Date.now()}`),e.jsx(Ce,{className:"text-3xl bg-gradient-to-br from-cyan-500 to-blue-600 text-white",children:r.name.split(" ").map(a=>a[0]).join("")})]})}),i&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-cyan-600/80 rounded-full",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}),e.jsx("label",{htmlFor:"profile-image-upload",className:"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-cyan-600/80 to-blue-600/80 rounded-full opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer backdrop-blur-sm",children:e.jsx(me,{className:"text-white text-2xl"})}),e.jsx("input",{id:"profile-image-upload",type:"file",accept:"image/*",onChange:le,className:"hidden"})]}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mt-4 text-center",children:r.name}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:r.email}),e.jsx(M,{className:"mt-3 bg-gradient-to-r from-cyan-500 to-blue-600",children:"Verified Member"})]}),e.jsx(Q,{className:"my-6 bg-gradient-to-r from-transparent via-cyan-200 to-transparent"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(h.div,{whileHover:{scale:1.02,y:-2},className:"flex items-center justify-between p-4 bg-gradient-to-br from-cyan-50 to-blue-50 rounded-xl border-2 border-cyan-100 shadow-md hover:shadow-lg transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-xl flex items-center justify-center shadow-md",children:e.jsx(z,{className:"text-white text-lg"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:"Total Rides"}),e.jsx("p",{className:"text-2xl font-bold bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent",children:A.length})]})]})}),e.jsx(h.div,{whileHover:{scale:1.02,y:-2},className:"flex items-center justify-between p-4 bg-gradient-to-br from-amber-50 to-orange-50 rounded-xl border-2 border-amber-100 shadow-md hover:shadow-lg transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl flex items-center justify-center shadow-md",children:e.jsx(xe,{className:"text-white text-lg"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:"Total Spent"}),e.jsxs("p",{className:"text-2xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent",children:["₱",A.reduce((a,t)=>a+(Number(t.price)||0),0).toFixed(2)]})]})]})}),e.jsx(h.div,{whileHover:{scale:1.02,y:-2},className:"flex items-center justify-between p-4 bg-gradient-to-br from-emerald-50 to-teal-50 rounded-xl border-2 border-emerald-100 shadow-md hover:shadow-lg transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl flex items-center justify-center shadow-md",children:e.jsx(T,{className:"text-white text-lg"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:"Member Since"}),e.jsx("p",{className:"text-2xl font-bold bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent",children:s?.created_at?new Date(s.created_at).getFullYear():"2024"})]})]})})]})]})})}),e.jsxs(h.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},className:"lg:col-span-2 space-y-6",children:[e.jsxs(R,{className:"shadow-lg border-0 bg-gradient-to-br from-white to-cyan-50/30",children:[e.jsx(K,{className:"bg-gradient-to-r from-cyan-50/50 to-blue-50/50 border-b border-cyan-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(W,{className:"text-2xl bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent flex items-center gap-2",children:[e.jsx(b,{className:"text-cyan-600"}),"Account Information"]}),e.jsx(G,{className:"mt-1",children:"Your personal details and contact information"})]}),p?e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{onClick:te,size:"sm",disabled:w,className:"gap-2 bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:w?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-4 h-4"}),"Save"]})}),e.jsxs(g,{onClick:re,variant:"outline",size:"sm",className:"gap-2 border-2 border-gray-300 hover:bg-gray-50",children:[e.jsx(ue,{className:"w-4 h-4"}),"Cancel"]})]}):e.jsxs(g,{onClick:()=>d(!0),variant:"outline",size:"sm",className:"gap-2 !border-2 !border-cyan-400 !text-cyan-700 hover:!bg-cyan-50 hover:!border-cyan-500 !bg-white hover:!text-cyan-800 font-semibold shadow-sm",children:[e.jsx(pe,{className:"w-4 h-4 text-cyan-700"}),"Edit"]})]})}),e.jsx($,{className:"pt-6",children:p?e.jsxs("div",{children:[e.jsx(ze,{user:s,profileData:r,onDataChange:se}),Object.keys(O).length>0&&e.jsxs("div",{className:"mt-4 p-4 bg-red-50 border-2 border-red-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-semibold text-red-800 mb-2",children:"Please fix the following errors:"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:Object.entries(O).map(([a,t])=>e.jsxs("li",{className:"text-sm text-red-700",children:[e.jsxs("strong",{children:[a.charAt(0).toUpperCase()+a.slice(1),":"]})," ",t]},a))})]})]}):e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[e.jsx(b,{className:"text-cyan-600"}),"Full Name"]}),e.jsx("div",{className:"p-3 bg-gradient-to-r from-cyan-50 to-blue-50 rounded-lg border border-cyan-100",children:e.jsx("p",{className:"text-gray-900 font-medium",children:r.name})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[e.jsx(X,{className:"text-cyan-600"}),"Email Address"]}),e.jsx("div",{className:"p-3 bg-gradient-to-r from-cyan-50 to-blue-50 rounded-lg border border-cyan-100",children:e.jsx("p",{className:"text-gray-900 font-medium",children:r.email})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[e.jsx(Z,{className:"text-cyan-600"}),"Phone Number"]}),e.jsx("div",{className:"p-3 bg-gradient-to-r from-cyan-50 to-blue-50 rounded-lg border border-cyan-100",children:e.jsx("p",{className:"text-gray-900 font-medium",children:r.phone||"Not provided"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[e.jsx(v,{className:"text-cyan-600"}),"Age"]}),e.jsx("div",{className:"p-3 bg-gradient-to-r from-cyan-50 to-blue-50 rounded-lg border border-cyan-100",children:e.jsx("p",{className:"text-gray-900 font-medium",children:r.age||"Not provided"})})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs(m,{className:"flex items-center gap-2 text-gray-700 font-semibold",children:[e.jsx(P,{className:"text-cyan-600"}),"Address"]}),e.jsx("div",{className:"p-3 bg-gradient-to-r from-cyan-50 to-blue-50 rounded-lg border border-cyan-100",children:e.jsx("p",{className:"text-gray-900 font-medium",children:r.address||"Not provided"})})]})]})})]}),e.jsxs(R,{className:"shadow-lg border-0 bg-gradient-to-br from-white to-cyan-50/30",children:[e.jsxs(K,{className:"bg-gradient-to-r from-cyan-50/50 to-blue-50/50 border-b border-cyan-100",children:[e.jsxs(W,{className:"text-2xl flex items-center gap-2 bg-gradient-to-r from-cyan-600 to-blue-600 bg-clip-text text-transparent",children:[e.jsx(z,{className:"text-cyan-600"}),"My Bookings"]}),e.jsx(G,{className:"mt-1",children:"Your recent ride requests and bookings"})]}),e.jsx($,{className:"pt-6",children:A.length>0?e.jsx("div",{className:"space-y-4",children:A.map((a,t)=>e.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:t*.1},className:"border-2 border-cyan-100 rounded-xl p-5 hover:shadow-xl transition-all bg-gradient-to-br from-white to-cyan-50/30 hover:border-cyan-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"font-semibold text-lg text-gray-900 flex items-center gap-2",children:[e.jsx(b,{className:"text-cyan-600 text-sm"}),a.userName]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1 flex items-center gap-2",children:[e.jsx(v,{className:"text-cyan-600 text-xs"}),a.date," at ",a.time]})]}),e.jsxs(M,{variant:"outline",className:`${a.statusInfo.className} flex items-center gap-1.5 px-3 py-1.5 font-semibold`,children:[e.jsx(a.statusInfo.icon,{className:`text-xs ${a.statusInfo.iconClassName} ${a.status==="pending"?"animate-spin":""}`}),a.statusInfo.label]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(P,{className:"text-cyan-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Pickup"}),e.jsx("p",{className:"font-medium text-gray-900",children:a.pickupLocation})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(P,{className:"text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Drop-off"}),e.jsx("p",{className:"font-medium text-gray-900",children:a.dropoffLocation})]})]})]}),(a.vehicleType||a.passengers)&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-3 mb-3",children:[a.vehicleType&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(T,{className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Vehicle"}),e.jsx("p",{className:"font-medium text-gray-900 capitalize",children:a.vehicleType==="habal-habal"?"Habal-Habal":a.vehicleType==="tuktuk"?"Tuk-Tuk":a.vehicleType.charAt(0).toUpperCase()+a.vehicleType.slice(1)})]})]}),a.passengers&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ge,{className:"text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Passengers"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[a.passengers," ",a.passengers===1?"person":"people"]})]})]})]}),(a.distance||a.time)&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-3 mb-3",children:[a.distance&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(fe,{className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Distance"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[a.distance.toFixed(2)," km"]})]})]}),a.timeMinutes&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(I,{className:"text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Duration"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[a.timeMinutes," min"]})]})]})]}),(a.pickupDate||a.returnDate)&&e.jsxs("div",{className:"grid md:grid-cols-2 gap-3 mb-3 p-3 bg-cyan-50 rounded-lg border border-cyan-100",children:[a.pickupDate&&e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(v,{className:"text-cyan-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 font-medium",children:"Pickup Schedule"}),e.jsx("p",{className:"font-semibold text-gray-900",children:a.pickupDate.formatted}),a.pickupDate.time&&e.jsxs("p",{className:"text-gray-700 text-xs mt-0.5",children:[e.jsx(I,{className:"inline mr-1"}),a.pickupDate.time]})]})]}),a.returnDate&&e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(v,{className:"text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 font-medium",children:"Return Schedule"}),e.jsx("p",{className:"font-semibold text-gray-900",children:a.returnDate.formatted}),a.returnDate.time&&e.jsxs("p",{className:"text-gray-700 text-xs mt-0.5",children:[e.jsx(I,{className:"inline mr-1"}),a.returnDate.time]})]})]})]}),e.jsx(Q,{className:"my-3"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Status:"}),e.jsxs(M,{variant:"outline",className:`${a.statusInfo.className} flex items-center gap-1.5 px-2.5 py-1 font-medium text-xs`,children:[e.jsx(a.statusInfo.icon,{className:`text-[10px] ${a.statusInfo.iconClassName} ${a.status==="pending"?"animate-spin":""}`}),a.statusInfo.label]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Total Fare"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["₱",(Number(a.price)||0).toFixed(2)]})]}),a.status!=="cancelled"&&a.status!=="completed"&&e.jsx(g,{onClick:()=>ne(a.id),disabled:y===a.id,variant:"outline",size:"sm",className:"gap-2 border-2 border-red-300 text-red-700 hover:bg-red-50 hover:border-red-400 hover:text-black bg-white font-semibold shadow-sm disabled:opacity-50",children:y===a.id?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-3 h-3 animate-spin"}),"Cancelling..."]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-3 h-3"}),"Cancel"]})})]})]})]},a.id))}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-cyan-100 to-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(z,{className:"w-12 h-12 text-cyan-500"})}),e.jsx("p",{className:"text-gray-700 text-xl font-semibold mb-2",children:"No rides yet"}),e.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Request your first ride and start exploring Siargao!"}),e.jsx(oe,{href:"/tropiride/vehicles",children:e.jsxs(g,{className:"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 shadow-lg hover:shadow-xl transition-all px-6 py-6 text-base",children:[e.jsx(T,{className:"mr-2"}),"Book a Ride"]})})]})})]})]})]})]})}),e.jsx(Ae,{open:ae,onOpenChange:q,children:e.jsxs(_e,{className:"sm:max-w-[425px]",children:[e.jsxs(Te,{children:[e.jsxs(Ee,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(B,{className:"w-5 h-5"}),"Cancel Booking"]}),e.jsx(Ie,{className:"pt-2",children:"Are you sure you want to cancel this booking? This action cannot be undone."})]}),e.jsxs(Pe,{className:"gap-2 sm:gap-0",children:[e.jsx(g,{variant:"outline",onClick:()=>q(!1),disabled:y!==null,className:"border-gray-300 hover:bg-gray-50",children:"No, Keep Booking"}),e.jsx(g,{variant:"destructive",onClick:ie,disabled:y!==null,className:"bg-red-600 hover:bg-red-700 text-white",children:y!==null?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-4 h-4 animate-spin mr-2"}),"Cancelling..."]}):e.jsxs(e.Fragment,{children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Yes, Cancel Booking"]})})]})]})})]})}export{ta as default};
