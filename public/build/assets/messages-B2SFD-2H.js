import{r as n,j as e,u as ut,H as pt}from"./app-DATJSk02.js";import{c as Oe,u as mt,R as ft,a as ht,b as xt,V as gt,C as vt,d as St,A as wt}from"./app-layout-BK_GRsZZ.js";import{C as ve,a as Se,b as Ie,c as Te,d as Pe}from"./card-B1S1KxgK.js";import{u as yt,A as Ct,a as bt,b as Nt}from"./ErrorBoundary-C5KTbpzX.js";import{B as Re}from"./badge-DjzpHOc_.js";import{u as H,a as jt,c as oe,B as _t}from"./button-Cpvsye0R.js";import{r as ke}from"./index-Bs5OsWqX.js";import{u as Ee,c as E}from"./index-B4fuw4qc.js";import{c as It,u as q}from"./index-P1d-VrM6.js";import{u as je,P as Tt,h as Pt,a as Rt,R as Et,F as Mt,D as At}from"./index-DWv36XpW.js";import{P as k}from"./index-Cb992pyu.js";import{u as Dt}from"./index-CpW29TWF.js";import{c as Le}from"./createLucideIcon-CWJud2Xx.js";import{C as Ot}from"./check-0DHvppZv.js";import{M as Me}from"./message-square-CsFWhGY6.js";import{M as kt}from"./map-pin-BF5AnyJa.js";import{P as Lt}from"./phone-Dd40m-Od.js";import{L as Ae}from"./loader-circle-C04xZSrL.js";/* empty css            */import"./floating-ui.react-dom-DNRjgxbn.js";import"./index-BDQEw_oY.js";import"./index-D329iiHL.js";import"./index-CMWG4mbA.js";import"./index-CId40Vud.js";import"./app-logo-icon-D7ID7ruW.js";import"./shield-check-NGu4UIn8.js";import"./car-SnGofreg.js";import"./clsx-B-dksMZM.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Be=Le("ChevronDown",Bt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ht=Le("ChevronUp",Vt);function De(o,[s,t]){return Math.min(t,Math.max(s,o))}var Ut=[" ","Enter","ArrowUp","ArrowDown"],Ft=[" ","Enter"],Q="Select",[ie,de,Wt]=ht(Q),[ne,rn]=It(Q,[Wt,Oe]),ue=Oe(),[Kt,G]=ne(Q),[zt,$t]=ne(Q),Ve=o=>{const{__scopeSelect:s,children:t,open:d,defaultOpen:r,onOpenChange:m,value:a,defaultValue:l,onValueChange:c,dir:f,name:v,autoComplete:S,disabled:_,required:j,form:y}=o,u=ue(s),[x,w]=n.useState(null),[p,g]=n.useState(null),[B,D]=n.useState(!1),X=mt(f),[i,C]=Ee({prop:d,defaultProp:r??!1,onChange:m,caller:Q}),[R,M]=Ee({prop:a,defaultProp:l,onChange:c,caller:Q}),T=n.useRef(null),U=x?y||!!x.closest("form"):!0,[z,F]=n.useState(new Set),W=Array.from(z).map(A=>A.props.value).join(";");return e.jsx(ft,{...u,children:e.jsxs(Kt,{required:j,scope:s,trigger:x,onTriggerChange:w,valueNode:p,onValueNodeChange:g,valueNodeHasChildren:B,onValueNodeHasChildrenChange:D,contentId:je(),value:R,onValueChange:M,open:i,onOpenChange:C,dir:X,triggerPointerDownPosRef:T,disabled:_,children:[e.jsx(ie.Provider,{scope:s,children:e.jsx(zt,{scope:o.__scopeSelect,onNativeOptionAdd:n.useCallback(A=>{F(V=>new Set(V).add(A))},[]),onNativeOptionRemove:n.useCallback(A=>{F(V=>{const K=new Set(V);return K.delete(A),K})},[]),children:t})}),U?e.jsxs(lt,{"aria-hidden":!0,required:j,tabIndex:-1,name:v,autoComplete:S,value:R,onChange:A=>M(A.target.value),disabled:_,form:y,children:[R===void 0?e.jsx("option",{value:""}):null,Array.from(z)]},W):null]})})};Ve.displayName=Q;var He="SelectTrigger",Ue=n.forwardRef((o,s)=>{const{__scopeSelect:t,disabled:d=!1,...r}=o,m=ue(t),a=G(He,t),l=a.disabled||d,c=H(s,a.onTriggerChange),f=de(t),v=n.useRef("touch"),[S,_,j]=it(u=>{const x=f().filter(g=>!g.disabled),w=x.find(g=>g.value===a.value),p=dt(x,u,w);p!==void 0&&a.onValueChange(p.value)}),y=u=>{l||(a.onOpenChange(!0),j()),u&&(a.triggerPointerDownPosRef.current={x:Math.round(u.pageX),y:Math.round(u.pageY)})};return e.jsx(xt,{asChild:!0,...m,children:e.jsx(k.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":ct(a.value)?"":void 0,...r,ref:c,onClick:E(r.onClick,u=>{u.currentTarget.focus(),v.current!=="mouse"&&y(u)}),onPointerDown:E(r.onPointerDown,u=>{v.current=u.pointerType;const x=u.target;x.hasPointerCapture(u.pointerId)&&x.releasePointerCapture(u.pointerId),u.button===0&&u.ctrlKey===!1&&u.pointerType==="mouse"&&(y(u),u.preventDefault())}),onKeyDown:E(r.onKeyDown,u=>{const x=S.current!=="";!(u.ctrlKey||u.altKey||u.metaKey)&&u.key.length===1&&_(u.key),!(x&&u.key===" ")&&Ut.includes(u.key)&&(y(),u.preventDefault())})})})});Ue.displayName=He;var Fe="SelectValue",We=n.forwardRef((o,s)=>{const{__scopeSelect:t,className:d,style:r,children:m,placeholder:a="",...l}=o,c=G(Fe,t),{onValueNodeHasChildrenChange:f}=c,v=m!==void 0,S=H(s,c.onValueNodeChange);return q(()=>{f(v)},[f,v]),e.jsx(k.span,{...l,ref:S,style:{pointerEvents:"none"},children:ct(c.value)?e.jsx(e.Fragment,{children:a}):m})});We.displayName=Fe;var qt="SelectIcon",Ke=n.forwardRef((o,s)=>{const{__scopeSelect:t,children:d,...r}=o;return e.jsx(k.span,{"aria-hidden":!0,...r,ref:s,children:d||"▼"})});Ke.displayName=qt;var Gt="SelectPortal",ze=o=>e.jsx(Tt,{asChild:!0,...o});ze.displayName=Gt;var ee="SelectContent",$e=n.forwardRef((o,s)=>{const t=G(ee,o.__scopeSelect),[d,r]=n.useState();if(q(()=>{r(new DocumentFragment)},[]),!t.open){const m=d;return m?ke.createPortal(e.jsx(qe,{scope:o.__scopeSelect,children:e.jsx(ie.Slot,{scope:o.__scopeSelect,children:e.jsx("div",{children:o.children})})}),m):null}return e.jsx(Ge,{...o,ref:s})});$e.displayName=ee;var L=10,[qe,Y]=ne(ee),Yt="SelectContentImpl",Xt=jt("SelectContent.RemoveScroll"),Ge=n.forwardRef((o,s)=>{const{__scopeSelect:t,position:d="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:m,onPointerDownOutside:a,side:l,sideOffset:c,align:f,alignOffset:v,arrowPadding:S,collisionBoundary:_,collisionPadding:j,sticky:y,hideWhenDetached:u,avoidCollisions:x,...w}=o,p=G(ee,t),[g,B]=n.useState(null),[D,X]=n.useState(null),i=H(s,h=>B(h)),[C,R]=n.useState(null),[M,T]=n.useState(null),U=de(t),[z,F]=n.useState(!1),W=n.useRef(!1);n.useEffect(()=>{if(g)return Pt(g)},[g]),Rt();const A=n.useCallback(h=>{const[I,...O]=U().map(P=>P.ref.current),[b]=O.slice(-1),N=document.activeElement;for(const P of h)if(P===N||(P?.scrollIntoView({block:"nearest"}),P===I&&D&&(D.scrollTop=0),P===b&&D&&(D.scrollTop=D.scrollHeight),P?.focus(),document.activeElement!==N))return},[U,D]),V=n.useCallback(()=>A([C,g]),[A,C,g]);n.useEffect(()=>{z&&V()},[z,V]);const{onOpenChange:K,triggerPointerDownPosRef:$}=p;n.useEffect(()=>{if(g){let h={x:0,y:0};const I=b=>{h={x:Math.abs(Math.round(b.pageX)-($.current?.x??0)),y:Math.abs(Math.round(b.pageY)-($.current?.y??0))}},O=b=>{h.x<=10&&h.y<=10?b.preventDefault():g.contains(b.target)||K(!1),document.removeEventListener("pointermove",I),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",I),document.addEventListener("pointerup",O,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",I),document.removeEventListener("pointerup",O,{capture:!0})}}},[g,K,$]),n.useEffect(()=>{const h=()=>K(!1);return window.addEventListener("blur",h),window.addEventListener("resize",h),()=>{window.removeEventListener("blur",h),window.removeEventListener("resize",h)}},[K]);const[pe,ae]=it(h=>{const I=U().filter(N=>!N.disabled),O=I.find(N=>N.ref.current===document.activeElement),b=dt(I,h,O);b&&setTimeout(()=>b.ref.current.focus())}),me=n.useCallback((h,I,O)=>{const b=!W.current&&!O;(p.value!==void 0&&p.value===I||b)&&(R(h),b&&(W.current=!0))},[p.value]),fe=n.useCallback(()=>g?.focus(),[g]),te=n.useCallback((h,I,O)=>{const b=!W.current&&!O;(p.value!==void 0&&p.value===I||b)&&T(h)},[p.value]),le=d==="popper"?we:Ye,re=le===we?{side:l,sideOffset:c,align:f,alignOffset:v,arrowPadding:S,collisionBoundary:_,collisionPadding:j,sticky:y,hideWhenDetached:u,avoidCollisions:x}:{};return e.jsx(qe,{scope:t,content:g,viewport:D,onViewportChange:X,itemRefCallback:me,selectedItem:C,onItemLeave:fe,itemTextRefCallback:te,focusSelectedItem:V,selectedItemText:M,position:d,isPositioned:z,searchRef:pe,children:e.jsx(Et,{as:Xt,allowPinchZoom:!0,children:e.jsx(Mt,{asChild:!0,trapped:p.open,onMountAutoFocus:h=>{h.preventDefault()},onUnmountAutoFocus:E(r,h=>{p.trigger?.focus({preventScroll:!0}),h.preventDefault()}),children:e.jsx(At,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:m,onPointerDownOutside:a,onFocusOutside:h=>h.preventDefault(),onDismiss:()=>p.onOpenChange(!1),children:e.jsx(le,{role:"listbox",id:p.contentId,"data-state":p.open?"open":"closed",dir:p.dir,onContextMenu:h=>h.preventDefault(),...w,...re,onPlaced:()=>F(!0),ref:i,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:E(w.onKeyDown,h=>{const I=h.ctrlKey||h.altKey||h.metaKey;if(h.key==="Tab"&&h.preventDefault(),!I&&h.key.length===1&&ae(h.key),["ArrowUp","ArrowDown","Home","End"].includes(h.key)){let b=U().filter(N=>!N.disabled).map(N=>N.ref.current);if(["ArrowUp","End"].includes(h.key)&&(b=b.slice().reverse()),["ArrowUp","ArrowDown"].includes(h.key)){const N=h.target,P=b.indexOf(N);b=b.slice(P+1)}setTimeout(()=>A(b)),h.preventDefault()}})})})})})})});Ge.displayName=Yt;var Zt="SelectItemAlignedPosition",Ye=n.forwardRef((o,s)=>{const{__scopeSelect:t,onPlaced:d,...r}=o,m=G(ee,t),a=Y(ee,t),[l,c]=n.useState(null),[f,v]=n.useState(null),S=H(s,i=>v(i)),_=de(t),j=n.useRef(!1),y=n.useRef(!0),{viewport:u,selectedItem:x,selectedItemText:w,focusSelectedItem:p}=a,g=n.useCallback(()=>{if(m.trigger&&m.valueNode&&l&&f&&u&&x&&w){const i=m.trigger.getBoundingClientRect(),C=f.getBoundingClientRect(),R=m.valueNode.getBoundingClientRect(),M=w.getBoundingClientRect();if(m.dir!=="rtl"){const N=M.left-C.left,P=R.left-N,Z=i.left-P,J=i.width+Z,he=Math.max(J,C.width),xe=window.innerWidth-L,ge=De(P,[L,Math.max(L,xe-he)]);l.style.minWidth=J+"px",l.style.left=ge+"px"}else{const N=C.right-M.right,P=window.innerWidth-R.right-N,Z=window.innerWidth-i.right-P,J=i.width+Z,he=Math.max(J,C.width),xe=window.innerWidth-L,ge=De(P,[L,Math.max(L,xe-he)]);l.style.minWidth=J+"px",l.style.right=ge+"px"}const T=_(),U=window.innerHeight-L*2,z=u.scrollHeight,F=window.getComputedStyle(f),W=parseInt(F.borderTopWidth,10),A=parseInt(F.paddingTop,10),V=parseInt(F.borderBottomWidth,10),K=parseInt(F.paddingBottom,10),$=W+A+z+K+V,pe=Math.min(x.offsetHeight*5,$),ae=window.getComputedStyle(u),me=parseInt(ae.paddingTop,10),fe=parseInt(ae.paddingBottom,10),te=i.top+i.height/2-L,le=U-te,re=x.offsetHeight/2,h=x.offsetTop+re,I=W+A+h,O=$-I;if(I<=te){const N=T.length>0&&x===T[T.length-1].ref.current;l.style.bottom="0px";const P=f.clientHeight-u.offsetTop-u.offsetHeight,Z=Math.max(le,re+(N?fe:0)+P+V),J=I+Z;l.style.height=J+"px"}else{const N=T.length>0&&x===T[0].ref.current;l.style.top="0px";const Z=Math.max(te,W+u.offsetTop+(N?me:0)+re)+O;l.style.height=Z+"px",u.scrollTop=I-te+u.offsetTop}l.style.margin=`${L}px 0`,l.style.minHeight=pe+"px",l.style.maxHeight=U+"px",d?.(),requestAnimationFrame(()=>j.current=!0)}},[_,m.trigger,m.valueNode,l,f,u,x,w,m.dir,d]);q(()=>g(),[g]);const[B,D]=n.useState();q(()=>{f&&D(window.getComputedStyle(f).zIndex)},[f]);const X=n.useCallback(i=>{i&&y.current===!0&&(g(),p?.(),y.current=!1)},[g,p]);return e.jsx(Qt,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:j,onScrollButtonChange:X,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:B},children:e.jsx(k.div,{...r,ref:S,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});Ye.displayName=Zt;var Jt="SelectPopperPosition",we=n.forwardRef((o,s)=>{const{__scopeSelect:t,align:d="start",collisionPadding:r=L,...m}=o,a=ue(t);return e.jsx(vt,{...a,...m,ref:s,align:d,collisionPadding:r,style:{boxSizing:"border-box",...m.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});we.displayName=Jt;var[Qt,_e]=ne(ee,{}),ye="SelectViewport",Xe=n.forwardRef((o,s)=>{const{__scopeSelect:t,nonce:d,...r}=o,m=Y(ye,t),a=_e(ye,t),l=H(s,m.onViewportChange),c=n.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:d}),e.jsx(ie.Slot,{scope:t,children:e.jsx(k.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:E(r.onScroll,f=>{const v=f.currentTarget,{contentWrapper:S,shouldExpandOnScrollRef:_}=a;if(_?.current&&S){const j=Math.abs(c.current-v.scrollTop);if(j>0){const y=window.innerHeight-L*2,u=parseFloat(S.style.minHeight),x=parseFloat(S.style.height),w=Math.max(u,x);if(w<y){const p=w+j,g=Math.min(y,p),B=p-g;S.style.height=g+"px",S.style.bottom==="0px"&&(v.scrollTop=B>0?B:0,S.style.justifyContent="flex-end")}}}c.current=v.scrollTop})})})]})});Xe.displayName=ye;var Ze="SelectGroup",[eo,to]=ne(Ze),oo=n.forwardRef((o,s)=>{const{__scopeSelect:t,...d}=o,r=je();return e.jsx(eo,{scope:t,id:r,children:e.jsx(k.div,{role:"group","aria-labelledby":r,...d,ref:s})})});oo.displayName=Ze;var Je="SelectLabel",no=n.forwardRef((o,s)=>{const{__scopeSelect:t,...d}=o,r=to(Je,t);return e.jsx(k.div,{id:r.id,...d,ref:s})});no.displayName=Je;var ce="SelectItem",[ro,Qe]=ne(ce),et=n.forwardRef((o,s)=>{const{__scopeSelect:t,value:d,disabled:r=!1,textValue:m,...a}=o,l=G(ce,t),c=Y(ce,t),f=l.value===d,[v,S]=n.useState(m??""),[_,j]=n.useState(!1),y=H(s,p=>c.itemRefCallback?.(p,d,r)),u=je(),x=n.useRef("touch"),w=()=>{r||(l.onValueChange(d),l.onOpenChange(!1))};if(d==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(ro,{scope:t,value:d,disabled:r,textId:u,isSelected:f,onItemTextChange:n.useCallback(p=>{S(g=>g||(p?.textContent??"").trim())},[]),children:e.jsx(ie.ItemSlot,{scope:t,value:d,disabled:r,textValue:v,children:e.jsx(k.div,{role:"option","aria-labelledby":u,"data-highlighted":_?"":void 0,"aria-selected":f&&_,"data-state":f?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...a,ref:y,onFocus:E(a.onFocus,()=>j(!0)),onBlur:E(a.onBlur,()=>j(!1)),onClick:E(a.onClick,()=>{x.current!=="mouse"&&w()}),onPointerUp:E(a.onPointerUp,()=>{x.current==="mouse"&&w()}),onPointerDown:E(a.onPointerDown,p=>{x.current=p.pointerType}),onPointerMove:E(a.onPointerMove,p=>{x.current=p.pointerType,r?c.onItemLeave?.():x.current==="mouse"&&p.currentTarget.focus({preventScroll:!0})}),onPointerLeave:E(a.onPointerLeave,p=>{p.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:E(a.onKeyDown,p=>{c.searchRef?.current!==""&&p.key===" "||(Ft.includes(p.key)&&w(),p.key===" "&&p.preventDefault())})})})})});et.displayName=ce;var se="SelectItemText",tt=n.forwardRef((o,s)=>{const{__scopeSelect:t,className:d,style:r,...m}=o,a=G(se,t),l=Y(se,t),c=Qe(se,t),f=$t(se,t),[v,S]=n.useState(null),_=H(s,w=>S(w),c.onItemTextChange,w=>l.itemTextRefCallback?.(w,c.value,c.disabled)),j=v?.textContent,y=n.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:j},c.value),[c.disabled,c.value,j]),{onNativeOptionAdd:u,onNativeOptionRemove:x}=f;return q(()=>(u(y),()=>x(y)),[u,x,y]),e.jsxs(e.Fragment,{children:[e.jsx(k.span,{id:c.textId,...m,ref:_}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?ke.createPortal(m.children,a.valueNode):null]})});tt.displayName=se;var ot="SelectItemIndicator",nt=n.forwardRef((o,s)=>{const{__scopeSelect:t,...d}=o;return Qe(ot,t).isSelected?e.jsx(k.span,{"aria-hidden":!0,...d,ref:s}):null});nt.displayName=ot;var Ce="SelectScrollUpButton",rt=n.forwardRef((o,s)=>{const t=Y(Ce,o.__scopeSelect),d=_e(Ce,o.__scopeSelect),[r,m]=n.useState(!1),a=H(s,d.onScrollButtonChange);return q(()=>{if(t.viewport&&t.isPositioned){let l=function(){const f=c.scrollTop>0;m(f)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),r?e.jsx(at,{...o,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});rt.displayName=Ce;var be="SelectScrollDownButton",st=n.forwardRef((o,s)=>{const t=Y(be,o.__scopeSelect),d=_e(be,o.__scopeSelect),[r,m]=n.useState(!1),a=H(s,d.onScrollButtonChange);return q(()=>{if(t.viewport&&t.isPositioned){let l=function(){const f=c.scrollHeight-c.clientHeight,v=Math.ceil(c.scrollTop)<f;m(v)};const c=t.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),r?e.jsx(at,{...o,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=t;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});st.displayName=be;var at=n.forwardRef((o,s)=>{const{__scopeSelect:t,onAutoScroll:d,...r}=o,m=Y("SelectScrollButton",t),a=n.useRef(null),l=de(t),c=n.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return n.useEffect(()=>()=>c(),[c]),q(()=>{l().find(v=>v.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),e.jsx(k.div,{"aria-hidden":!0,...r,ref:s,style:{flexShrink:0,...r.style},onPointerDown:E(r.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(d,50))}),onPointerMove:E(r.onPointerMove,()=>{m.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(d,50))}),onPointerLeave:E(r.onPointerLeave,()=>{c()})})}),so="SelectSeparator",ao=n.forwardRef((o,s)=>{const{__scopeSelect:t,...d}=o;return e.jsx(k.div,{"aria-hidden":!0,...d,ref:s})});ao.displayName=so;var Ne="SelectArrow",lo=n.forwardRef((o,s)=>{const{__scopeSelect:t,...d}=o,r=ue(t),m=G(Ne,t),a=Y(Ne,t);return m.open&&a.position==="popper"?e.jsx(St,{...r,...d,ref:s}):null});lo.displayName=Ne;var co="SelectBubbleInput",lt=n.forwardRef(({__scopeSelect:o,value:s,...t},d)=>{const r=n.useRef(null),m=H(d,r),a=Dt(s);return n.useEffect(()=>{const l=r.current;if(!l)return;const c=window.HTMLSelectElement.prototype,v=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==s&&v){const S=new Event("change",{bubbles:!0});v.call(l,s),l.dispatchEvent(S)}},[a,s]),e.jsx(k.select,{...t,style:{...gt,...t.style},ref:m,defaultValue:s})});lt.displayName=co;function ct(o){return o===""||o===void 0}function it(o){const s=yt(o),t=n.useRef(""),d=n.useRef(0),r=n.useCallback(a=>{const l=t.current+a;s(l),(function c(f){t.current=f,window.clearTimeout(d.current),f!==""&&(d.current=window.setTimeout(()=>c(""),1e3))})(l)},[s]),m=n.useCallback(()=>{t.current="",window.clearTimeout(d.current)},[]);return n.useEffect(()=>()=>window.clearTimeout(d.current),[]),[t,r,m]}function dt(o,s,t){const r=s.length>1&&Array.from(s).every(f=>f===s[0])?s[0]:s,m=t?o.indexOf(t):-1;let a=io(o,Math.max(m,0));r.length===1&&(a=a.filter(f=>f!==t));const c=a.find(f=>f.textValue.toLowerCase().startsWith(r.toLowerCase()));return c!==t?c:void 0}function io(o,s){return o.map((t,d)=>o[(s+d)%o.length])}var uo=Ve,po=Ue,mo=We,fo=Ke,ho=ze,xo=$e,go=Xe,vo=et,So=tt,wo=nt,yo=rt,Co=st;function bo({...o}){return e.jsx(uo,{"data-slot":"select",...o})}function No({...o}){return e.jsx(mo,{"data-slot":"select-value",...o})}function jo({className:o,children:s,...t}){return e.jsxs(po,{"data-slot":"select-trigger",className:oe("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-full items-center justify-between rounded-md border bg-transparent px-3 py-2 text-sm shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 [&>span]:line-clamp-1",o),...t,children:[s,e.jsx(fo,{asChild:!0,children:e.jsx(Be,{className:"size-4 opacity-50"})})]})}function _o({className:o,children:s,position:t="popper",...d}){return e.jsx(ho,{children:e.jsxs(xo,{"data-slot":"select-content",className:oe("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",o),position:t,...d,children:[e.jsx(To,{}),e.jsx(go,{className:oe("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),e.jsx(Po,{})]})})}function Io({className:o,children:s,...t}){return e.jsxs(vo,{"data-slot":"select-item",className:oe("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",o),...t,children:[e.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:e.jsx(wo,{children:e.jsx(Ot,{className:"size-4"})})}),e.jsx(So,{children:s})]})}function To({className:o,...s}){return e.jsx(yo,{"data-slot":"select-scroll-up-button",className:oe("flex cursor-default items-center justify-center py-1",o),...s,children:e.jsx(Ht,{className:"size-4"})})}function Po({className:o,...s}){return e.jsx(Co,{"data-slot":"select-scroll-down-button",className:oe("flex cursor-default items-center justify-center py-1",o),...s,children:e.jsx(Be,{className:"size-4"})})}function sn({bookings:o=[],initialBookingId:s}){const{auth:t}=ut().props,d=t.user,[r,m]=n.useState(s??o[0]?.chat_booking_id??null),[a,l]=n.useState([]),[c,f]=n.useState(""),[v,S]=n.useState(!1),[_,j]=n.useState(!1),[y,u]=n.useState(null),x=n.useRef(null),w=typeof document<"u"?document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")??"":"",p=n.useMemo(()=>r?o.find(i=>i.chat_booking_id===r)??null:null,[o,r]);n.useEffect(()=>{if(!r){l([]);return}let i=!0;const C=(M=!1)=>{M||(S(!0),u(null)),fetch(`/chat/bookings/${r}/messages`,{headers:{Accept:"application/json"},credentials:"same-origin"}).then(T=>{if(!T.ok)throw new Error("Failed to load messages");return T.json()}).then(T=>{i&&l(T.messages??[])}).catch(T=>{console.error(T),i&&(M||u("Unable to load messages. Please try again."))}).finally(()=>{!i||M||S(!1)})};C();const R=setInterval(()=>C(!0),5e3);return()=>{i=!1,clearInterval(R)}},[r]),n.useEffect(()=>{x.current&&(x.current.scrollTop=x.current.scrollHeight)},[a]),n.useEffect(()=>{if(!o.length){m(null);return}(!r||!o.some(i=>i.chat_booking_id===r))&&m(s??o[0].chat_booking_id)},[o,r,s]);const g=async i=>{if(i.preventDefault(),!r||_)return;const C=c.trim();if(C){j(!0),u(null);try{const R=await fetch(`/chat/bookings/${r}/messages`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":w,"X-Requested-With":"XMLHttpRequest"},credentials:"same-origin",body:JSON.stringify({message:C})});if(!R.ok)throw new Error("Failed to send message");const M=await R.json();M.message&&l(T=>[...T,M.message]),f("")}catch(R){console.error(R),u("Unable to send message. Please try again.")}finally{j(!1)}}},B=i=>{switch(i){case"completed":return"default";case"pending":return"secondary";case"in_progress":return"outline";case"cancelled":return"destructive";default:return"outline"}},D=i=>new Date(i).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),X=i=>i.split(" ").map(C=>C[0]).join("").slice(0,2).toUpperCase();return e.jsxs(wt,{children:[e.jsx(pt,{title:"Messages - Driver"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-hidden p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Messages"}),e.jsx("p",{className:"text-muted-foreground",children:"Keep your customers updated and confirm trip details in real time."})]}),o.length===0?e.jsx(ve,{className:"border-dashed",children:e.jsxs(Se,{className:"py-16 text-center space-y-3",children:[e.jsx(Me,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"text-lg font-semibold",children:"No conversations yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Accept a booking to start chatting with customers."})]})}):e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs(ve,{children:[e.jsxs(Ie,{children:[e.jsx(Te,{children:"Your Rides"}),e.jsx(Pe,{children:"Select a booking to open its chat thread"})]}),e.jsxs(Se,{className:"space-y-3",children:[e.jsxs(bo,{value:r?String(r):void 0,onValueChange:i=>m(Number(i)),children:[e.jsx(jo,{children:e.jsx(No,{placeholder:"Choose booking"})}),e.jsx(_o,{children:o.map(i=>e.jsxs(Io,{value:String(i.chat_booking_id),children:["#",i.latest_booking_id," · ",i.customer?.name||"Customer"]},i.chat_booking_id))})]}),e.jsx("div",{className:"space-y-3 max-h-[420px] overflow-y-auto pr-1",children:o.map(i=>{const C=r===i.chat_booking_id;return e.jsxs("button",{onClick:()=>m(i.chat_booking_id),className:`w-full text-left border rounded-xl p-4 transition ${C?"border-primary shadow-lg shadow-primary/10 bg-primary/5":"border-border bg-background hover:border-primary/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"font-semibold text-sm",children:["#",i.latest_booking_id," · ",i.customer?.name||"Customer"]}),e.jsx(Re,{variant:B(i.status),className:"text-[10px]",children:i.status.replace("_"," ")})]}),e.jsxs("p",{className:"mt-1 text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(kt,{className:"h-3 w-3"}),i.pickup_location]}),e.jsx("p",{className:"text-xs text-muted-foreground ml-4 truncate",children:i.dropoff_location})]},i.chat_booking_id)})})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(ve,{className:"h-full",children:[e.jsxs(Ie,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5 text-primary"}),"Conversation"]}),e.jsx(Pe,{children:"Respond quickly to provide a smoother pickup experience."})]}),e.jsxs(Se,{className:"space-y-4",children:[p&&e.jsxs("div",{className:"rounded-xl border p-4 bg-muted/40 flex items-center gap-4",children:[e.jsxs(Ct,{className:"h-12 w-12 border",children:[e.jsx(bt,{src:p.customer?.avatar_url??(p.customer?.name?`https://ui-avatars.com/api/?name=${encodeURIComponent(p.customer.name)}&background=0ea5e9&color=fff`:void 0)}),e.jsx(Nt,{children:X(p.customer?.name||"Customer")})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-semibold",children:p.customer?.name||"Customer"}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Lt,{className:"h-3 w-3"}),p.customer?.phone||"No phone"]}),p.vehicle_type&&e.jsx(Re,{variant:"outline",className:"capitalize",children:p.vehicle_type}),p.passengers&&e.jsxs("span",{children:[p.passengers," pax"]})]})]})]}),y&&e.jsx("div",{className:"rounded-lg border border-destructive/30 bg-destructive/10 px-3 py-2 text-sm text-destructive",children:y}),e.jsx("div",{ref:x,className:"h-96 rounded-xl border bg-background p-4 overflow-y-auto space-y-3",children:v?e.jsxs("div",{className:"flex h-full items-center justify-center text-muted-foreground",children:[e.jsx(Ae,{className:"h-5 w-5 animate-spin mr-2"}),"Loading conversation..."]}):a.length===0?e.jsx("div",{className:"text-center text-muted-foreground mt-10",children:"Start the conversation and let the customer know you’re on the way."}):a.map(i=>{const C=i.sender_id===d.id,R=i.is_system?"bg-amber-100 text-amber-900":C?"bg-primary text-primary-foreground":"bg-muted text-foreground";return e.jsxs("div",{className:`flex flex-col ${C?"items-end text-right":"items-start"}`,children:[e.jsx("div",{className:`px-4 py-2 rounded-2xl max-w-[80%] ${R}`,children:i.message}),e.jsxs("span",{className:"mt-1 text-[10px] text-muted-foreground",children:[i.sender_name," ·"," ",i.created_at?D(i.created_at):""]})]},i.id)})}),p&&e.jsxs("form",{className:"space-y-2",onSubmit:g,children:[e.jsx("textarea",{rows:3,value:c,onChange:i=>f(i.target.value),className:"w-full rounded-xl border border-input bg-background px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary/50",placeholder:"Send a quick update..."}),e.jsx("div",{className:"flex justify-end",children:e.jsx(_t,{type:"submit",disabled:_,children:_?e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"h-4 w-4 animate-spin mr-2"}),"Sending"]}):"Send Message"})})]})]})]})})]})]})]})}export{sn as default};
